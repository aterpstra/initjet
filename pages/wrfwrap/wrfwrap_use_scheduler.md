---
title: Use wrf-wrap to run a WRF simulation
#keywords: sample
summary: "How to use wrf-wrap to run a default WRF simulation using the scheduler"
sidebar: wrfwrap_sidebar
permalink: wrfwrap_use_scheduler.html
folder: wrfwrap
---

## WRF wrapper process 

The default WRF wrapper creates intermediate files for all input data (ungrib.exe), which are merged with the geo-static data into input-files for WRF (metgrid.exe), thereafter the WRF-model is initialised (real.exe) and run (wrf.exe). 

{% include note.html content='WRF geo-static files (created with geogrid.exe) are not generated by the WRF wrapper. Running geogrid.exe requires large geo-static input-data sets (~30-100GB) and the output files (geo_em.d0\<x\>.nc) are domain specific static files, i.e. they are reusable.'%}



## Run a WRF-simulation using MOS scheduler 

### Pre-requistics

- [metocean/scheduler](https://github.com/metocean/scheduler) is installed, configured and running ([more info](contrib_scheduler.html))

- Local access is needed to:
1. WRF native configuration files (i.e. namelists, .TBL, Vtables, ...)  
2. WPS static files (i.e. geo_em.d0\<x\>.nc files) 
3. forcing data (i.e. atmos, ocean, ...) 

The directory structure mounted in the wrf-wrap Docker containers by the scheduler resembles the MOS operational system (see [operational setup](contrib_ops_structure.html) for more info).
Thus, the data (configuration, static, and forcing data) needs to be available in those mounted directories. 

### Run WRF-simulation

Create an action file (.yaml) to configure wrf-wrap, and include the configuration for the 'scheduler' and the 'pycallable'. 

Details regarding wrf-wrap action files are in [WRF wrapper actions](wrfwrap_actions.html).

{% include note.html content="Actions (.yaml) should be stored in the ACTIONS_DIR of the scheduler ([more info](contrib_scheduler.html))."%}

Run the action using the scheduler:

		sched run -c <YYYYMMDD_HH>z <my_action_to_run_wrf>

Monitor scheduler activity at: 
- local [http://localhost:5555/](http://localhost:5555/) 
- testing [http://flower.scheduler-testing.service.consul:5555](http://flower.scheduler-testing.service.consul:5555)
- operational [https://scheduler.metocean.co.nz/](https://scheduler.metocean.co.nz/)




{% include links.html %}
